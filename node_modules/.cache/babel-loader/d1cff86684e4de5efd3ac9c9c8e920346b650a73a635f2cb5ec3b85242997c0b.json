{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{Link}from'react-router-dom';import Footer2 from'../Home/Footer2';import{useTranslation}from'react-i18next';import{API_BASE_URL}from'../config';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const RecentPosts=()=>{const[blogs,setBlogs]=useState([]);const{t,i18n}=useTranslation();const fetchBlogs=async()=>{try{const selectedLanguage=localStorage.getItem('selectedLanguage')||'en';const res=await axios.get(\"\".concat(API_BASE_URL,\"/api/blogs?lang=\").concat(selectedLanguage));setBlogs(res.data);}catch(error){console.error('Error fetching blogs:',error);}};useEffect(()=>{fetchBlogs();const handleLanguageChange=()=>{i18n.changeLanguage(localStorage.getItem('selectedLanguage')||'en');fetchBlogs();};window.addEventListener('storage',handleLanguageChange);window.addEventListener('languageChanged',handleLanguageChange);return()=>{window.removeEventListener('storage',handleLanguageChange);window.removeEventListener('languageChanged',handleLanguageChange);};},[]);const truncate=(text,wordLimit)=>{if(!text||typeof text!=='string')return'';const words=text.split(' ');return words.slice(0,wordLimit).join(' ');};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"section\",{className:\"section recent\",\"aria-label\":\"recent post\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title-wrapper\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"h2 section-title\",children:[t('recent.seeWhat'),\" \",/*#__PURE__*/_jsx(\"strong\",{className:\"strong\",children:t('recent.blogs')})]}),/*#__PURE__*/_jsx(\"div\",{className:\"top-author\",children:/*#__PURE__*/_jsx(\"ul\",{className:\"avatar-list\"})})]}),/*#__PURE__*/_jsx(\"ul\",{className:\"grid-list\",children:blogs.map((post,index)=>{const title=post.title||'Untitled';const shortDescription=truncate(post.description,6);return/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"blog-card\",children:[/*#__PURE__*/_jsx(\"figure\",{className:\"card-banner img-holder\",style:{\"--width\":\"550\",\"--height\":\"660\"},children:/*#__PURE__*/_jsx(\"img\",{src:post.imageUrl,width:\"550\",height:\"660\",loading:\"lazy\",alt:title,className:\"img-cover\"})}),/*#__PURE__*/_jsx(\"h1\",{id:\"titler\",children:title}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-content\",children:[/*#__PURE__*/_jsx(\"ul\",{className:\"card-meta-list\",children:post.tags&&post.tags.map((tag,tagIdx)=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"card-tag\",children:tag})},tagIdx))}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",children:[shortDescription,\"...\"]}),/*#__PURE__*/_jsxs(Link,{to:\"/blogs/\".concat(post._id),className:\"read-more\",children:[t('recent.readMore'),\" \\u2192\"]})]})]})},index);})})]})}),/*#__PURE__*/_jsx(Footer2,{})]});};export default RecentPosts;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","Footer2","useTranslation","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RecentPosts","blogs","setBlogs","t","i18n","fetchBlogs","selectedLanguage","localStorage","getItem","res","get","concat","data","error","console","handleLanguageChange","changeLanguage","window","addEventListener","removeEventListener","truncate","text","wordLimit","words","split","slice","join","children","className","map","post","index","title","shortDescription","description","style","src","imageUrl","width","height","loading","alt","id","tags","tag","tagIdx","to","_id"],"sources":["/Users/mac/Desktop/data/application/EFrontend/src/Blog2/RecentPosts.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport Footer2 from '../Home/Footer2';\nimport { useTranslation } from 'react-i18next';\nimport { API_BASE_URL } from '../config';\n\nconst RecentPosts = () => {\n  const [blogs, setBlogs] = useState([]);\n  const { t, i18n } = useTranslation();\n\n  const fetchBlogs = async () => {\n    try {\n      const selectedLanguage = localStorage.getItem('selectedLanguage') || 'en';\n      const res = await axios.get(`${API_BASE_URL}/api/blogs?lang=${selectedLanguage}`);\n      setBlogs(res.data);\n    } catch (error) {\n      console.error('Error fetching blogs:', error);\n    }\n  };\n\n  useEffect(() => {\n    fetchBlogs();\n\n    const handleLanguageChange = () => {\n      i18n.changeLanguage(localStorage.getItem('selectedLanguage') || 'en');\n      fetchBlogs();\n    };\n\n    window.addEventListener('storage', handleLanguageChange);\n    window.addEventListener('languageChanged', handleLanguageChange);\n\n    return () => {\n      window.removeEventListener('storage', handleLanguageChange);\n      window.removeEventListener('languageChanged', handleLanguageChange);\n    };\n  }, []);\n\n  const truncate = (text, wordLimit) => {\n    if (!text || typeof text !== 'string') return '';\n    const words = text.split(' ');\n    return words.slice(0, wordLimit).join(' ');\n  };\n\n  return (\n    <>\n      <section className=\"section recent\" aria-label=\"recent post\">\n        <div className=\"container\">\n          <div className=\"title-wrapper\">\n            <h2 className=\"h2 section-title\">\n              {t('recent.seeWhat')} <strong className=\"strong\">{t('recent.blogs')}</strong>\n            </h2>\n\n            <div className=\"top-author\">\n              <ul className=\"avatar-list\">\n                {/* Optional author avatars */}\n              </ul>\n            </div>\n          </div>\n\n          <ul className=\"grid-list\">\n            {blogs.map((post, index) => {\n              const title = post.title || 'Untitled';\n              const shortDescription = truncate(post.description, 6);\n\n              return (\n                <li key={index}>\n                  <div className=\"blog-card\">\n                    <figure\n                      className=\"card-banner img-holder\"\n                      style={{ \"--width\": \"550\", \"--height\": \"660\" }}\n                    >\n                      <img\n                        src={post.imageUrl}\n                        width=\"550\"\n                        height=\"660\"\n                        loading=\"lazy\"\n                        alt={title}\n                        className=\"img-cover\"\n                      />\n                    </figure>\n\n                    <h1 id=\"titler\">{title}</h1>\n\n                    <div className=\"card-content\">\n                      <ul className=\"card-meta-list\">\n                        {post.tags && post.tags.map((tag, tagIdx) => (\n                          <li key={tagIdx}>\n                            <span className=\"card-tag\">{tag}</span>\n                          </li>\n                        ))}\n                      </ul>\n\n                      <p className=\"card-text\">{shortDescription}...</p>\n\n                      <Link to={`/blogs/${post._id}`} className=\"read-more\">\n                        {t('recent.readMore')} â†’\n                      </Link>\n                    </div>\n                  </div>\n                </li>\n              );\n            })}\n          </ul>\n        </div>\n      </section>\n      <Footer2 />\n    </>\n  );\n};\n\nexport default RecentPosts;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}