{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useLocation,useNavigate}from'react-router-dom';import{useTranslation}from'react-i18next';import Header from'./Home/Header';import Footer2 from'./Home/Footer2';import'./ResetPassword.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ResetPassword=()=>{const{t}=useTranslation();const[newPassword,setNewPassword]=useState('');const[confirmPassword,setConfirmPassword]=useState('');const[message,setMessage]=useState('');const[isLoading,setIsLoading]=useState(false);const[token,setToken]=useState('');const location=useLocation();const navigate=useNavigate();useEffect(()=>{// Get token from URL parameters\nconst params=new URLSearchParams(location.search);const urlToken=params.get('token');if(urlToken){setToken(urlToken);}else{setMessage(t('login.invalid_reset_link'));}},[location.search]);const handleSubmit=async e=>{e.preventDefault();setMessage('');setIsLoading(true);// Validate passwords\nif(newPassword.length<6){setMessage('Password must be at least 6 characters long.');setIsLoading(false);return;}if(newPassword!==confirmPassword){setMessage('Passwords do not match.');setIsLoading(false);return;}try{const response=await fetch('https://e-back-bice.vercel.app/api/reset-password',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({token:token,newPassword:newPassword})});const data=await response.json();if(response.ok){setMessage(t('login.password_reset_success'));setTimeout(()=>{navigate('/login');},2000);}else{setMessage(data.message||t('login.password_reset_error'));}}catch(error){setMessage(t('login.password_reset_error'));}finally{setIsLoading(false);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"reset-password-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"reset-password-card\",children:[/*#__PURE__*/_jsx(\"h1\",{children:t(\"login.reset_password_title\")}),!token?/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"p\",{children:message}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/login'),className:\"back-to-login-btn\",children:t('login.back_to_login')})]}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"reset-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newPassword\",children:t(\"login.new_password\")}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"newPassword\",value:newPassword,onChange:e=>setNewPassword(e.target.value),placeholder:t(\"login.new_password\"),required:true,minLength:\"6\",autoComplete:\"new-password\",\"data-lpignore\":\"true\",\"data-form-type\":\"other\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:t(\"login.confirm_password\")}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirmPassword\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),placeholder:t(\"login.confirm_password\"),required:true,minLength:\"6\",autoComplete:\"new-password\",\"data-lpignore\":\"true\",\"data-form-type\":\"other\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.includes('successfully')?'success':'error'),children:message}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"reset-btn\",disabled:isLoading,children:isLoading?t('login.resetting_password'):t('login.reset_password')})]})]})}),/*#__PURE__*/_jsx(Footer2,{})]});};export default ResetPassword;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","useTranslation","Header","Footer2","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ResetPassword","t","newPassword","setNewPassword","confirmPassword","setConfirmPassword","message","setMessage","isLoading","setIsLoading","token","setToken","location","navigate","params","URLSearchParams","search","urlToken","get","handleSubmit","e","preventDefault","length","response","fetch","method","headers","body","JSON","stringify","data","json","ok","setTimeout","error","children","className","onClick","onSubmit","htmlFor","type","id","value","onChange","target","placeholder","required","minLength","autoComplete","concat","includes","disabled"],"sources":["/Users/mac/Desktop/data/application/EFrontend/src/ResetPassword.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport Header from './Home/Header';\nimport Footer2 from './Home/Footer2';\nimport './ResetPassword.css';\n\nconst ResetPassword = () => {\n  const { t } = useTranslation();\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [message, setMessage] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [token, setToken] = useState('');\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    // Get token from URL parameters\n    const params = new URLSearchParams(location.search);\n    const urlToken = params.get('token');\n    if (urlToken) {\n      setToken(urlToken);\n    } else {\n      setMessage(t('login.invalid_reset_link'));\n    }\n  }, [location.search]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setMessage('');\n    setIsLoading(true);\n\n    // Validate passwords\n    if (newPassword.length < 6) {\n      setMessage('Password must be at least 6 characters long.');\n      setIsLoading(false);\n      return;\n    }\n\n    if (newPassword !== confirmPassword) {\n      setMessage('Passwords do not match.');\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      const response = await fetch('https://e-back-bice.vercel.app/api/reset-password', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          token: token,\n          newPassword: newPassword\n        }),\n      });\n\n      const data = await response.json();\n\n      if (response.ok) {\n        setMessage(t('login.password_reset_success'));\n        setTimeout(() => {\n          navigate('/login');\n        }, 2000);\n      } else {\n        setMessage(data.message || t('login.password_reset_error'));\n      }\n    } catch (error) {\n      setMessage(t('login.password_reset_error'));\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <>\n      <Header />\n      <div className=\"reset-password-container\">\n        <div className=\"reset-password-card\">\n          <h1>{t(\"login.reset_password_title\")}</h1>\n          \n          {!token ? (\n            <div className=\"error-message\">\n              <p>{message}</p>\n                             <button \n                 onClick={() => navigate('/login')}\n                 className=\"back-to-login-btn\"\n               >\n                 {t('login.back_to_login')}\n               </button>\n            </div>\n          ) : (\n            <form onSubmit={handleSubmit} className=\"reset-form\">\n                           <div className=\"form-group\">\n               <label htmlFor=\"newPassword\">{t(\"login.new_password\")}</label>\n               <input\n                 type=\"password\"\n                 id=\"newPassword\"\n                 value={newPassword}\n                 onChange={(e) => setNewPassword(e.target.value)}\n                 placeholder={t(\"login.new_password\")}\n                 required\n                 minLength=\"6\"\n                 autoComplete=\"new-password\"\n                 data-lpignore=\"true\"\n                 data-form-type=\"other\"\n               />\n             </div>\n\n             <div className=\"form-group\">\n               <label htmlFor=\"confirmPassword\">{t(\"login.confirm_password\")}</label>\n               <input\n                 type=\"password\"\n                 id=\"confirmPassword\"\n                 value={confirmPassword}\n                 onChange={(e) => setConfirmPassword(e.target.value)}\n                 placeholder={t(\"login.confirm_password\")}\n                 required\n                 minLength=\"6\"\n                 autoComplete=\"new-password\"\n                 data-lpignore=\"true\"\n                 data-form-type=\"other\"\n               />\n             </div>\n\n              {message && (\n                <div className={`message ${message.includes('successfully') ? 'success' : 'error'}`}>\n                  {message}\n                </div>\n              )}\n\n                             <button \n                 type=\"submit\" \n                 className=\"reset-btn\"\n                 disabled={isLoading}\n               >\n                 {isLoading ? t('login.resetting_password') : t('login.reset_password')}\n               </button>\n            </form>\n          )}\n        </div>\n      </div>\n      <Footer2 />\n    </>\n  );\n};\n\nexport default ResetPassword; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}