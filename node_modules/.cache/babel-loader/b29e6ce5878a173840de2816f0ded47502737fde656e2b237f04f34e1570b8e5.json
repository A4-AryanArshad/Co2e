{"ast":null,"code":"import _objectSpread from\"/Users/mac/Desktop/data/application/EFrontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// iPhone Safari Fix Utility\n// This file contains utilities to handle iPhone Safari specific issues\nexport const isIPhoneSafari=()=>{const userAgent=navigator.userAgent;const isIPhone=/iPad|iPhone|iPod/.test(userAgent);const isSafari=/Safari/.test(userAgent)&&!/Chrome/.test(userAgent);return isIPhone&&isSafari;};export const getAuthHeaders=()=>{const headers={'Content-Type':'application/json'};// For iPhone Safari, use Authorization header as fallback\nif(isIPhoneSafari()){const fallbackToken=localStorage.getItem('fallbackToken');if(fallbackToken){headers['Authorization']=\"Bearer \".concat(fallbackToken);}}return headers;};export const createIPhoneSafeRequest=function(url){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const isIPhone=isIPhoneSafari();const requestOptions=_objectSpread(_objectSpread({credentials:'include'},options),{},{headers:_objectSpread(_objectSpread({},getAuthHeaders()),options.headers)});// For iPhone Safari, add additional headers\nif(isIPhone){requestOptions.headers['Cache-Control']='no-cache';requestOptions.headers['Pragma']='no-cache';}return{url,options:requestOptions};};export const handleIPhoneError=error=>{if(isIPhoneSafari()){var _error$message,_error$message2;console.log('iPhone Safari error detected:',error);// If it's an authentication error, try to refresh the token\nif((_error$message=error.message)!==null&&_error$message!==void 0&&_error$message.includes('401')||(_error$message2=error.message)!==null&&_error$message2!==void 0&&_error$message2.includes('Unauthorized')){const fallbackToken=localStorage.getItem('fallbackToken');if(fallbackToken){console.log('Attempting to use fallback token for iPhone Safari');return true;// Indicate that we should retry with fallback\n}}}return false;};export const setupIPhoneDetection=()=>{if(isIPhoneSafari()){console.log('iPhone Safari detected - applying special handling');// Add meta tag for viewport if not present\nif(!document.querySelector('meta[name=\"viewport\"]')){const meta=document.createElement('meta');meta.name='viewport';meta.content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no';document.head.appendChild(meta);}// Only apply input fixes if not on login page\nconst isLoginPage=window.location.pathname==='/login';if(!isLoginPage){// Disable zoom on input focus for iPhone\nconst inputs=document.querySelectorAll('input, textarea, select');inputs.forEach(input=>{input.addEventListener('focus',()=>{input.style.fontSize='16px';// Prevents zoom on iPhone\n});});}}};","map":{"version":3,"names":["isIPhoneSafari","userAgent","navigator","isIPhone","test","isSafari","getAuthHeaders","headers","fallbackToken","localStorage","getItem","concat","createIPhoneSafeRequest","url","options","arguments","length","undefined","requestOptions","_objectSpread","credentials","handleIPhoneError","error","_error$message","_error$message2","console","log","message","includes","setupIPhoneDetection","document","querySelector","meta","createElement","name","content","head","appendChild","isLoginPage","window","location","pathname","inputs","querySelectorAll","forEach","input","addEventListener","style","fontSize"],"sources":["/Users/mac/Desktop/data/application/EFrontend/src/utils/iphoneFix.js"],"sourcesContent":["// iPhone Safari Fix Utility\n// This file contains utilities to handle iPhone Safari specific issues\n\nexport const isIPhoneSafari = () => {\n  const userAgent = navigator.userAgent;\n  const isIPhone = /iPad|iPhone|iPod/.test(userAgent);\n  const isSafari = /Safari/.test(userAgent) && !/Chrome/.test(userAgent);\n  return isIPhone && isSafari;\n};\n\nexport const getAuthHeaders = () => {\n  const headers = {\n    'Content-Type': 'application/json',\n  };\n\n  // For iPhone Safari, use Authorization header as fallback\n  if (isIPhoneSafari()) {\n    const fallbackToken = localStorage.getItem('fallbackToken');\n    if (fallbackToken) {\n      headers['Authorization'] = `Bearer ${fallbackToken}`;\n    }\n  }\n\n  return headers;\n};\n\nexport const createIPhoneSafeRequest = (url, options = {}) => {\n  const isIPhone = isIPhoneSafari();\n  \n  const requestOptions = {\n    credentials: 'include',\n    ...options,\n    headers: {\n      ...getAuthHeaders(),\n      ...options.headers,\n    },\n  };\n\n  // For iPhone Safari, add additional headers\n  if (isIPhone) {\n    requestOptions.headers['Cache-Control'] = 'no-cache';\n    requestOptions.headers['Pragma'] = 'no-cache';\n  }\n\n  return { url, options: requestOptions };\n};\n\nexport const handleIPhoneError = (error) => {\n  if (isIPhoneSafari()) {\n    console.log('iPhone Safari error detected:', error);\n    \n    // If it's an authentication error, try to refresh the token\n    if (error.message?.includes('401') || error.message?.includes('Unauthorized')) {\n      const fallbackToken = localStorage.getItem('fallbackToken');\n      if (fallbackToken) {\n        console.log('Attempting to use fallback token for iPhone Safari');\n        return true; // Indicate that we should retry with fallback\n      }\n    }\n  }\n  return false;\n};\n\nexport const setupIPhoneDetection = () => {\n  if (isIPhoneSafari()) {\n    console.log('iPhone Safari detected - applying special handling');\n    \n    // Add meta tag for viewport if not present\n    if (!document.querySelector('meta[name=\"viewport\"]')) {\n      const meta = document.createElement('meta');\n      meta.name = 'viewport';\n      meta.content = 'width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no';\n      document.head.appendChild(meta);\n    }\n    \n    // Only apply input fixes if not on login page\n    const isLoginPage = window.location.pathname === '/login';\n    if (!isLoginPage) {\n      // Disable zoom on input focus for iPhone\n      const inputs = document.querySelectorAll('input, textarea, select');\n      inputs.forEach(input => {\n        input.addEventListener('focus', () => {\n          input.style.fontSize = '16px'; // Prevents zoom on iPhone\n        });\n      });\n    }\n  }\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}